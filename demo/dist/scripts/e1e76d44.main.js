progress=function(){function a(a){d3.json(a,function(a,c){return a?console.log(a.message):(d.data=b(c),d.pie.show(),void 0)})}function b(a){return a.forEach(function(a){var b=[],c=[],d=[];for(workName in a.work){b.push(workName);for(key in a.work[workName])"mark"==key?c.push(a.work[workName][key]):d.push(a.work[workName][key])}a.work={},a.work.names=b,a.work.weights=d,a.work.marks=c},this),a}var c,d={version:"0.0.1",data:"Haven't received any data yet"};return d.init=function(b,d){var e;if(0===arguments.length)throw new TypeError("Function expects two parameters, none given.");if(c="string"==typeof b?document.getElementById(b):b,e=c.getAttribute("data-user-id"),"undefined"===e.trim()||""===e.trim())throw new Error("A user id cannot be undefined or empty");a(d)},d.pie={vars:{drawn:!1,width:750,height:150,outerRadius:75,innerRadius:63,pieEl:document.createElement("div"),pieId:"pieCharts",paths:null,svg:null,startValue:3},show:function(){if(!d.pie.vars.drawn){var a=document.createElement("div");a.setAttribute("id","pieClick"),a.setAttribute("data-update","weights"),a.innerHTML="Click me!",d.pie.vars.pieEl.appendChild(a),d3.select(a).on("click",function(){"weights"===this.getAttribute("data-update")?d.pie.updateWeights(this):d.pie.updateMarks(this)}),d.pie.vars.pieEl.setAttribute("id",d.pie.vars.pieId),c.appendChild(d.pie.vars.pieEl),d.pie.showOverallMarks(),d.pie.showModuleNames(),d.pie.vars.drawn=!0}},hide:function(){},tweenPie:function(a){var b=d3.svg.arc().innerRadius(d.pie.vars.innerRadius).outerRadius(d.pie.vars.outerRadius);console.log(a),a.innerRadius=0;var c={startAngle:6.28,endAngle:0},e=d3.interpolate(this._current||c,a);return this._current=e(0),function(a){return b(e(a))}},updateWeights:function(a){var b=d3.scale.category20c(),c=d3.layout.pie().sort(null),e=[[25,25,50],[30,30,40],[70,10,10,10],[95,4,1],[80,15,5]];a.setAttribute("data-update","overall"),d.pie.vars.svg=d.pie.vars.svg.data(e),d.pie.vars.paths=d.pie.vars.paths.data(function(a){return c(a)}),d.pie.vars.paths.exit().remove(),d.pie.vars.paths.enter().append("path").attr("fill",function(a,c){return b(c)}).attr("transform","translate(75, 75)"),d.pie.vars.paths.transition().ease("sin").duration(250).attrTween("d",d.pie.tweenPie)},updateMarks:function(a){var b=d3.layout.pie().sort(null),c=[];d.data.forEach(function(a){var b=[a.overallMark];b.push(100-a.overallMark),c.push(b)}),a.setAttribute("data-update","weights"),d.pie.vars.svg=d.pie.vars.svg.data(c),d.pie.vars.paths=d.pie.vars.paths.data(function(a){return b(a)}),d.pie.vars.paths.exit().remove(),d.pie.vars.paths.enter().append("path").attr("fill",function(a,b){return b%2?"#f7505a":"#f34400"}),d.pie.vars.paths.transition().ease("sin").duration(250).attrTween("d",d.pie.tweenPie)},showOverallMarks:function(){d3.scale.category20();var a=d3.layout.pie().sort(null),b=[];d.data.forEach(function(a){var c=[a.overallMark];c.push(100-a.overallMark),b.push(c)}),d.pie.vars.svg=d3.select(d.pie.vars.pieEl).selectAll("svg").data(b).enter().append("svg").attr("width",150).attr("height",150),d.pie.vars.paths=d.pie.vars.svg.selectAll("path").data(function(b){return a(b)}).enter().append("path").attr("fill",function(a,b){return 0===b%2?"#f7505a":"#e8e8e8"}).attr("transform","translate(75, 75)"),d.pie.vars.paths.transition().ease("sin").duration(5e3).attrTween("d",d.pie.tweenPie).each(function(a){this._current=a})},showWeights:function(){var a=d3.scale.category20();d3.svg.arc().innerRadius(d.pie.vars.innerRadius).outerRadius(d.pie.vars.outerRadius);var b=d3.layout.pie().sort(null),c=[[25,25,50],[30,30,40],[70,10,10,10],[95,4,1],[80,15,5]];d.pie.vars.svg=d3.select(d.pie.vars.pieEl).selectAll("svg").data(c).enter().append("svg").attr("width",150).attr("height",150),d.pie.vars.paths=d.pie.vars.svg.selectAll("path").data(function(a){return b(a)}).enter().append("path").attr("fill",function(b,c){return a(c)}).attr("transform","translate(75, 75)"),d.pie.vars.paths.transition().ease("sin").duration(500).attrTween("d",d.pie.tweenPie).each(function(a){this._current=a})},showModuleNames:function(){var a=[];d.data.forEach(function(b){a.push(b.name)});var b=d3.select(d.pie.vars.pieEl).selectAll("svg");b.selectAll("text").data(a).enter().append("text").attr("class","moduleName").attr("transform",function(a,b){return"translate("+(d.pie.vars.width*b+d.pie.vars.outerRadius)+", "+d.pie.vars.outerRadius+")"}).attr("text-anchor","middle").attr("alignment-baseline","middle").text(function(a){return a})}},d.scatter={show:function(){},hide:function(){}},d.force={show:function(){},hide:function(){}},d}();